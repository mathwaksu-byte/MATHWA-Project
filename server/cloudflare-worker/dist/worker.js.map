{
  "version": 3,
  "sources": ["../src/worker.ts"],
  "sourceRoot": "dist",
  "sourcesContent": ["export interface Env { UPSTREAM_URL: string, CORS_ORIGIN?: string, ADMIN_JWT_SECRET?: string, KV_APP: KVNamespace, R2_BUCKET: R2Bucket }\n\nfunction cors(origin: string | null, methods: string = 'GET,POST,PUT,DELETE,OPTIONS'): Headers {\n  const h = new Headers()\n  h.set('Access-Control-Allow-Origin', origin || '*')\n  h.set('Access-Control-Allow-Methods', methods)\n  h.set('Access-Control-Allow-Headers', 'Content-Type, Authorization')\n  h.set('Access-Control-Max-Age', '86400')\n  h.set('Vary', 'Origin')\n  return h\n}\n\nfunction json(data: any, status: number = 200, extra?: HeadersInit, origin?: string | null): Response {\n  const h = cors(origin)\n  h.set('Content-Type', 'application/json')\n  if (extra) Object.entries(extra as Record<string,string>).forEach(([k,v]) => h.set(k, v))\n  return new Response(JSON.stringify(data), { status, headers: h })\n}\n\nconst DEMO_UNI = { slug: 'kyrgyz-state-university', name: 'Kyrgyz State University', active: true, overview: '', accreditation: [], hero_image_url: '', logo_url: '', gallery_urls: [], duration_years: 6, intake_months: ['September'], eligibility: '', hostel_info: '' }\nconst DEMO_FEES = [1,2,3,4,5,6].map(y => ({ year: y, tuition: 1000, hostel: 1000, misc: 1000, currency: 'USD' }))\n\nasync function proxy(request: Request, env: Env): Promise<Response> {\n  const upstream = new URL(env.UPSTREAM_URL)\n  const url = new URL(request.url)\n  url.protocol = upstream.protocol\n  url.host = upstream.host\n  const init: RequestInit = { method: request.method, headers: request.headers }\n  if (request.method !== 'GET' && request.method !== 'HEAD') init.body = request.body\n  return fetch(url.toString(), init)\n}\n\nasync function proxySafe(request: Request, env: Env, origin: string | null): Promise<Response> {\n  try {\n    return await proxy(request, env)\n  } catch (e: any) {\n    return json({ error: 'upstream_unreachable', message: String(e?.message || e) }, 502, undefined, origin)\n  }\n}\n\nasync function handleUniversities(request: Request, env: Env, pathname: string, origin: string | null): Promise<Response> {\n  if (request.method === 'GET' && pathname === '/api/universities') {\n    const raw = await env.KV_APP.get('universities')\n    if (raw) return json({ universities: JSON.parse(raw) }, 200, undefined, origin)\n    return json({ universities: [DEMO_UNI] }, 200, undefined, origin)\n  }\n  if (request.method === 'GET' && pathname.startsWith('/api/universities/')) {\n    const slug = pathname.split('/').pop() as string\n    const uniRaw = await env.KV_APP.get(`uni:${slug}`)\n    const feesRaw = await env.KV_APP.get(`fees:${slug}`)\n    const uni = uniRaw ? JSON.parse(uniRaw) : (slug === DEMO_UNI.slug ? DEMO_UNI : null)\n    const fees = feesRaw ? JSON.parse(feesRaw) : DEMO_FEES\n    if (!uni) return json({ error: 'Not found' }, 404, undefined, origin)\n    return json({ university: uni, fees }, 200, undefined, origin)\n  }\n  if (request.method === 'POST' && pathname === '/api/universities') {\n    const body = await request.json()\n    const slug = String(body.slug || '')\n    if (!slug) return json({ error: 'slug required' }, 400, undefined, origin)\n    const uni = { ...body, slug }\n    await env.KV_APP.put(`uni:${slug}`, JSON.stringify(uni))\n    let list: any[] = []\n    const raw = await env.KV_APP.get('universities')\n    if (raw) list = JSON.parse(raw)\n    const exists = list.find((x: any) => x.slug === slug)\n    if (exists) list = list.map((x: any) => x.slug === slug ? uni : x)\n    else list.push(uni)\n    await env.KV_APP.put('universities', JSON.stringify(list))\n    return json({ university: uni }, 200, undefined, origin)\n  }\n  if (request.method === 'PUT' && pathname.startsWith('/api/universities/')) {\n    const slug = pathname.split('/').pop() as string\n    const currentRaw = await env.KV_APP.get(`uni:${slug}`)\n    if (!currentRaw) return json({ error: 'Not found' }, 404, undefined, origin)\n    const current = JSON.parse(currentRaw)\n    const body = await request.json()\n    const next = { ...current, ...body }\n    await env.KV_APP.put(`uni:${slug}`, JSON.stringify(next))\n    const raw = await env.KV_APP.get('universities')\n    let list: any[] = raw ? JSON.parse(raw) : []\n    list = list.map((x: any) => x.slug === slug ? next : x)\n    await env.KV_APP.put('universities', JSON.stringify(list))\n    return json({ university: next }, 200, undefined, origin)\n  }\n  if (request.method === 'DELETE' && pathname.startsWith('/api/universities/')) {\n    const slug = pathname.split('/').pop() as string\n    await env.KV_APP.delete(`uni:${slug}`)\n    await env.KV_APP.delete(`fees:${slug}`)\n    const raw = await env.KV_APP.get('universities')\n    let list: any[] = raw ? JSON.parse(raw) : []\n    list = list.filter((x: any) => x.slug !== slug)\n    await env.KV_APP.put('universities', JSON.stringify(list))\n    return json({ ok: true }, 200, undefined, origin)\n  }\n  if (pathname.startsWith('/api/universities/') && pathname.endsWith('/fees')) {\n    const slug = pathname.split('/')[3]\n    if (request.method === 'POST') {\n      const body = await request.json()\n      const existingRaw = await env.KV_APP.get(`fees:${slug}`)\n      let arr: any[] = existingRaw ? JSON.parse(existingRaw) : []\n      arr.push(body)\n      await env.KV_APP.put(`fees:${slug}`, JSON.stringify(arr))\n      return json({ fee: body }, 200, undefined, origin)\n    }\n    if (request.method === 'DELETE') {\n      const url = new URL(request.url)\n      const yearRaw = url.searchParams.get('year') || ''\n      const all = url.searchParams.get('all') ? true : false\n      const existingRaw = await env.KV_APP.get(`fees:${slug}`)\n      let arr: any[] = existingRaw ? JSON.parse(existingRaw) : []\n      const next = all ? [] : arr.filter((f: any) => String(f.year) !== String(yearRaw))\n      await env.KV_APP.put(`fees:${slug}`, JSON.stringify(next))\n      return json({ ok: true, fees: next }, 200, undefined, origin)\n    }\n  }\n  return proxy(request, env)\n}\n\nasync function handleSiteSettings(request: Request, env: Env, pathname: string, origin: string | null): Promise<Response> {\n  if (request.method === 'GET' && pathname === '/api/site-settings') {\n    const raw = await env.KV_APP.get('site_settings')\n    const settings = raw ? JSON.parse(raw) : { hero_title: 'Study MBBS Abroad with Confidence', hero_subtitle: 'Transparent fees, visa assistance, and student housing.', hero_video_mp4_url: '', hero_video_webm_url: '', hero_video_poster_url: '', background_gradient_css: '' }\n    return json({ settings }, 200, undefined, origin)\n  }\n  if (request.method === 'POST' && pathname === '/api/admin/site-settings') {\n    const fd = await request.formData()\n    const title = String(fd.get('hero_title') || '')\n    const subtitle = String(fd.get('hero_subtitle') || '')\n    const resetBg = !!fd.get('reset_background')\n    let bgId = String(fd.get('background_theme_id') || '')\n    let bgCss = String(fd.get('background_gradient_css') || '')\n    const mp4 = fd.get('hero_video_mp4') as File | null\n    const webm = fd.get('hero_video_webm') as File | null\n    const poster = fd.get('hero_poster') as File | null\n    const now = Date.now()\n    let mp4Url = ''\n    let webmUrl = ''\n    let posterUrl = ''\n    if (mp4) { const k = `hero/${now}_${mp4.name}`; await env.R2_BUCKET.put(k, await mp4.arrayBuffer()); mp4Url = `/uploads/${k}` }\n    if (webm) { const k = `hero/${now}_${webm.name}`; await env.R2_BUCKET.put(k, await webm.arrayBuffer()); webmUrl = `/uploads/${k}` }\n    if (poster) { const k = `hero/${now}_${poster.name}`; await env.R2_BUCKET.put(k, await poster.arrayBuffer()); posterUrl = `/uploads/${k}` }\n    const currentRaw = await env.KV_APP.get('site_settings')\n    let current = currentRaw ? JSON.parse(currentRaw) : { hero_title: '', hero_subtitle: '', hero_video_mp4_url: '', hero_video_webm_url: '', hero_video_poster_url: '', background_gradient_css: '', background_theme_id: '' }\n    const next = { ...current }\n    if (title) next.hero_title = title\n    if (subtitle) next.hero_subtitle = subtitle\n    if (mp4Url) next.hero_video_mp4_url = mp4Url\n    if (webmUrl) next.hero_video_webm_url = webmUrl\n    if (posterUrl) next.hero_video_poster_url = posterUrl\n    if (resetBg) { next.background_theme_id = ''; next.background_gradient_css = '' } else { if (bgId) next.background_theme_id = bgId; if (bgCss) next.background_gradient_css = bgCss }\n    await env.KV_APP.put('site_settings', JSON.stringify(next))\n    return json({ settings: next }, 200, undefined, origin)\n  }\n  return proxy(request, env)\n}\n\nasync function handleLeads(request: Request, env: Env, pathname: string, origin: string | null): Promise<Response> {\n  if (request.method === 'POST' && pathname === '/api/apply') {\n    const fd = await request.formData()\n    const obj: any = {}\n    for (const [k,v] of fd as any) obj[k] = typeof v === 'string' ? v : (v?.name || '')\n    const raw = await env.KV_APP.get('leads')\n    let arr: any[] = raw ? JSON.parse(raw) : []\n    const item = { id: Date.now().toString(), created_at: new Date().toISOString(), status: 'new', priority: 'normal', notes: '', ...obj }\n    arr.push(item)\n    await env.KV_APP.put('leads', JSON.stringify(arr))\n    return json({ ok: true }, 200, undefined, origin)\n  }\n  if (request.method === 'GET' && pathname === '/api/admin/leads') {\n    const url = new URL(request.url)\n    const page = Number(url.searchParams.get('page') || '1')\n    const perPage = Number(url.searchParams.get('perPage') || '20')\n    const q = url.searchParams.get('q') || ''\n    const status = url.searchParams.get('status') || ''\n    const uni = url.searchParams.get('university') || ''\n    const year = url.searchParams.get('year') || ''\n    const assigned = url.searchParams.get('assigned') || ''\n    const raw = await env.KV_APP.get('leads')\n    let arr: any[] = raw ? JSON.parse(raw) : []\n    let filtered = arr\n    if (q) filtered = filtered.filter((x: any) => (x.name || '').includes(q) || (x.email || '').includes(q) || (x.phone || '').includes(q))\n    if (status) filtered = filtered.filter((x: any) => x.status === status)\n    if (uni) filtered = filtered.filter((x: any) => x.preferred_university_slug === uni)\n    if (year) filtered = filtered.filter((x: any) => String(x.preferred_year) === String(year))\n    if (assigned) filtered = filtered.filter((x: any) => (x.assigned_admin_id || '') === assigned)\n    const total = filtered.length\n    const start = (page - 1) * perPage\n    const data = filtered.sort((a: any,b: any) => (a.created_at > b.created_at ? -1 : 1)).slice(start, start + perPage)\n    return json({ data, total }, 200, undefined, origin)\n  }\n  if (request.method === 'GET' && pathname.startsWith('/api/admin/leads/metrics')) {\n    const raw = await env.KV_APP.get('leads')\n    let arr: any[] = raw ? JSON.parse(raw) : []\n    const byStatus: any = {}\n    for (const x of arr) byStatus[x.status || 'new'] = (byStatus[x.status || 'new'] || 0) + 1\n    const since = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n    const daily: any = {}\n    for (const x of arr) { const d = new Date(x.created_at); if (d >= since) { const k = d.toISOString().slice(0,10); daily[k] = (daily[k] || 0) + 1 } }\n    return json({ byStatus, daily }, 200, undefined, origin)\n  }\n  if (request.method === 'GET' && pathname.startsWith('/api/admin/leads/')) {\n    const id = pathname.split('/').pop() as string\n    const raw = await env.KV_APP.get('leads')\n    let arr: any[] = raw ? JSON.parse(raw) : []\n    const item = arr.find((x: any) => x.id === id)\n    if (!item) return json({ error: 'Not found' }, 404, undefined, origin)\n    return json({ data: item }, 200, undefined, origin)\n  }\n  if (request.method === 'PATCH' && pathname.startsWith('/api/admin/leads/')) {\n    const id = pathname.split('/').pop() as string\n    const body = await request.json()\n    const raw = await env.KV_APP.get('leads')\n    let arr: any[] = raw ? JSON.parse(raw) : []\n    const idx = arr.findIndex((x: any) => x.id === id)\n    if (idx === -1) return json({ error: 'Not found' }, 404, undefined, origin)\n    arr[idx] = { ...arr[idx], ...body }\n    await env.KV_APP.put('leads', JSON.stringify(arr))\n    return json({ data: arr[idx] }, 200, undefined, origin)\n  }\n  return proxy(request, env)\n}\n\nexport default {\n  async fetch(request: Request, env: Env): Promise<Response> {\n    const url = new URL(request.url)\n    const origin = url.origin\n    if (request.method === 'OPTIONS') return new Response(null, { status: 204, headers: cors(origin) })\n    const p = url.pathname\n    if (p === '/' || p.startsWith('/@vite')) {\n      const h = cors(origin)\n      h.set('Content-Type', 'text/plain')\n      return new Response('ok', { status: 200, headers: h })\n    }\n    if (p.startsWith('/uploads/')) return handleUploads(request, env, p, origin)\n    if (p.startsWith('/api/universities')) return handleUniversities(request, env, p, origin)\n    if (p.startsWith('/api/site-settings') || p.startsWith('/api/admin/site-settings')) return handleSiteSettings(request, env, p, origin)\n    if (p.startsWith('/api/apply') || p.startsWith('/api/admin/leads')) return handleLeads(request, env, p, origin)\n    return proxySafe(request, env, origin)\n  }\n}\nfunction extContentType(key: string): string {\n  const k = key.toLowerCase()\n  if (k.endsWith('.mp4')) return 'video/mp4'\n  if (k.endsWith('.webm')) return 'video/webm'\n  if (k.endsWith('.png')) return 'image/png'\n  if (k.endsWith('.jpg') || k.endsWith('.jpeg')) return 'image/jpeg'\n  if (k.endsWith('.webp')) return 'image/webp'\n  if (k.endsWith('.json')) return 'application/json'\n  return 'application/octet-stream'\n}\n\nasync function handleUploads(request: Request, env: Env, pathname: string, origin: string | null): Promise<Response> {\n  const key = pathname.replace(/^\\/uploads\\//, '')\n  const obj = await env.R2_BUCKET.get(key)\n  if (obj) {\n    const h = cors(origin)\n    h.set('Content-Type', extContentType(key))\n    return new Response(obj.body as ReadableStream, { status: 200, headers: h })\n  }\n  return proxySafe(request, env, origin)\n}\n"],
  "mappings": "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",
  "names": []
}
